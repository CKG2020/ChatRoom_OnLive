{"remainingRequest":"/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_user/node_modules/babel-loader/lib/index.js!/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_user/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_user/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_user/src/views/sys/SysHr.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_user/src/views/sys/SysHr.vue","mtime":1609308664000},{"path":"/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_user/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_user/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_user/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_user/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"SysHr\",\n  data: function data() {\n    return {\n      keywords: '',\n      hrs: [],\n      selectedRoles: [],\n      allroles: []\n    };\n  },\n  mounted: function mounted() {\n    this.initHrs();\n  },\n  methods: {\n    deleteHr: function deleteHr(hr) {\n      var _this = this;\n\n      this.$confirm('此操作将永久删除【' + hr.name + '】, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this.deleteRequest(\"/system/hr/\" + hr.id).then(function (resp) {\n          if (resp) {\n            _this.initHrs();\n          }\n        });\n      }).catch(function () {\n        _this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    doSearch: function doSearch() {\n      this.initHrs();\n    },\n    hidePop: function hidePop(hr) {\n      var _this2 = this;\n\n      var roles = [];\n      Object.assign(roles, hr.roles);\n      var flag = false;\n\n      if (roles.length != this.selectedRoles.length) {\n        flag = true;\n      } else {\n        for (var i = 0; i < roles.length; i++) {\n          var role = roles[i];\n\n          for (var j = 0; j < this.selectedRoles.length; j++) {\n            var sr = this.selectedRoles[j];\n\n            if (role.id == sr) {\n              roles.splice(i, 1);\n              i--;\n              break;\n            }\n          }\n        }\n\n        if (roles.length != 0) {\n          flag = true;\n        }\n      }\n\n      if (flag) {\n        var url = '/system/hr/role?hrid=' + hr.id;\n        this.selectedRoles.forEach(function (sr) {\n          url += '&rids=' + sr;\n        });\n        this.putRequest(url).then(function (resp) {\n          if (resp) {\n            _this2.initHrs();\n          }\n        });\n      }\n    },\n    showPop: function showPop(hr) {\n      var _this3 = this;\n\n      this.initAllRoles();\n      var roles = hr.roles;\n      this.selectedRoles = [];\n      roles.forEach(function (r) {\n        _this3.selectedRoles.push(r.id);\n      });\n    },\n    enabledChange: function enabledChange(hr) {\n      var _this4 = this;\n\n      delete hr.roles;\n      this.putRequest(\"/system/hr/\", hr).then(function (resp) {\n        if (resp) {\n          _this4.initHrs();\n        }\n      });\n    },\n    initAllRoles: function initAllRoles() {\n      var _this5 = this;\n\n      this.getRequest(\"/system/hr/roles\").then(function (resp) {\n        if (resp) {\n          _this5.allroles = resp;\n        }\n      });\n    },\n    initHrs: function initHrs() {\n      var _this6 = this;\n\n      this.getRequest(\"/system/hr/?keywords=\" + this.keywords).then(function (resp) {\n        if (resp) {\n          _this6.hrs = resp;\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["SysHr.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,GAAA,EAAA,EAFA;AAGA,MAAA,aAAA,EAAA,EAHA;AAIA,MAAA,QAAA,EAAA;AAJA,KAAA;AAMA,GATA;AAUA,EAAA,OAVA,qBAUA;AACA,SAAA,OAAA;AACA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,EADA,EACA;AAAA;;AACA,WAAA,QAAA,CAAA,cAAA,EAAA,CAAA,IAAA,GAAA,UAAA,EAAA,IAAA,EAAA;AACA,QAAA,iBAAA,EAAA,IADA;AAEA,QAAA,gBAAA,EAAA,IAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OAAA,EAIA,IAJA,CAIA,YAAA;AACA,QAAA,KAAA,CAAA,aAAA,CAAA,gBAAA,EAAA,CAAA,EAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,EAAA;AACA,YAAA,KAAA,CAAA,OAAA;AACA;AACA,SAJA;AAKA,OAVA,EAUA,KAVA,CAUA,YAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA;AACA,UAAA,IAAA,EAAA,MADA;AAEA,UAAA,OAAA,EAAA;AAFA,SAAA;AAIA,OAfA;AAgBA,KAlBA;AAmBA,IAAA,QAnBA,sBAmBA;AACA,WAAA,OAAA;AACA,KArBA;AAsBA,IAAA,OAtBA,mBAsBA,EAtBA,EAsBA;AAAA;;AACA,UAAA,KAAA,GAAA,EAAA;AACA,MAAA,MAAA,CAAA,MAAA,CAAA,KAAA,EAAA,EAAA,CAAA,KAAA;AACA,UAAA,IAAA,GAAA,KAAA;;AACA,UAAA,KAAA,CAAA,MAAA,IAAA,KAAA,aAAA,CAAA,MAAA,EAAA;AACA,QAAA,IAAA,GAAA,IAAA;AACA,OAFA,MAEA;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,cAAA,IAAA,GAAA,KAAA,CAAA,CAAA,CAAA;;AACA,eAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,aAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,gBAAA,EAAA,GAAA,KAAA,aAAA,CAAA,CAAA,CAAA;;AACA,gBAAA,IAAA,CAAA,EAAA,IAAA,EAAA,EAAA;AACA,cAAA,KAAA,CAAA,MAAA,CAAA,CAAA,EAAA,CAAA;AACA,cAAA,CAAA;AACA;AACA;AACA;AACA;;AACA,YAAA,KAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,UAAA,IAAA,GAAA,IAAA;AACA;AACA;;AACA,UAAA,IAAA,EAAA;AACA,YAAA,GAAA,GAAA,0BAAA,EAAA,CAAA,EAAA;AACA,aAAA,aAAA,CAAA,OAAA,CAAA,UAAA,EAAA,EAAA;AACA,UAAA,GAAA,IAAA,WAAA,EAAA;AACA,SAFA;AAGA,aAAA,UAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,EAAA;AACA,YAAA,MAAA,CAAA,OAAA;AACA;AACA,SAJA;AAKA;AACA,KAvDA;AAwDA,IAAA,OAxDA,mBAwDA,EAxDA,EAwDA;AAAA;;AACA,WAAA,YAAA;AACA,UAAA,KAAA,GAAA,EAAA,CAAA,KAAA;AACA,WAAA,aAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,QAAA,MAAA,CAAA,aAAA,CAAA,IAAA,CAAA,CAAA,CAAA,EAAA;AACA,OAFA;AAGA,KA/DA;AAgEA,IAAA,aAhEA,yBAgEA,EAhEA,EAgEA;AAAA;;AACA,aAAA,EAAA,CAAA,KAAA;AACA,WAAA,UAAA,CAAA,aAAA,EAAA,EAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,OAAA;AACA;AACA,OAJA;AAKA,KAvEA;AAwEA,IAAA,YAxEA,0BAwEA;AAAA;;AACA,WAAA,UAAA,CAAA,kBAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,GAAA,IAAA;AACA;AACA,OAJA;AAKA,KA9EA;AA+EA,IAAA,OA/EA,qBA+EA;AAAA;;AACA,WAAA,UAAA,CAAA,0BAAA,KAAA,QAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,GAAA,GAAA,IAAA;AACA;AACA,OAJA;AAKA;AArFA;AAbA,CAAA","sourcesContent":["<template>\n    <div>\n        <div style=\"margin-top: 10px;display: flex;justify-content: center\">\n            <el-input v-model=\"keywords\" placeholder=\"通过用户名搜索用户...\" prefix-icon=\"el-icon-search\"\n                      style=\"width: 400px;margin-right: 10px\" @keydown.enter.native=\"doSearch\"></el-input>\n            <el-button icon=\"el-icon-search\" type=\"primary\" @click=\"doSearch\">搜索</el-button>\n        </div>\n        <div class=\"hr-container\">\n            <el-card class=\"hr-card\" v-for=\"(hr,index) in hrs\" :key=\"index\">\n                <div slot=\"header\" class=\"clearfix\">\n                    <span>{{hr.name}}</span>\n                    <el-button style=\"float: right; padding: 3px 0;color: #e30007;\" type=\"text\"\n                               icon=\"el-icon-delete\" @click=\"deleteHr(hr)\"></el-button>\n                </div>\n                <div>\n                    <div class=\"img-container\">\n                        <img :src=\"hr.userface\" :alt=\"hr.name\" :title=\"hr.name\" class=\"userface-img\">\n                    </div>\n                    <div class=\"userinfo-container\">\n                        <div>用户名：{{hr.name}}</div>\n                        <div>手机号码：{{hr.phone}}</div>\n                        <div>电话号码：{{hr.telephone}}</div>\n                        <div>地址：{{hr.address}}</div>\n                        <div>用户状态：\n                            <el-switch\n                                    v-model=\"hr.enabled\"\n                                    active-text=\"启用\"\n                                    @change=\"enabledChange(hr)\"\n                                    active-color=\"#13ce66\"\n                                    inactive-color=\"#ff4949\"\n                                    inactive-text=\"禁用\">\n                            </el-switch>\n                        </div>\n                        <div>用户角色：\n                            <el-tag type=\"success\" style=\"margin-right: 4px\" v-for=\"(role,indexj) in hr.roles\"\n                                    :key=\"indexj\">{{role.nameZh}}\n                            </el-tag>\n                            <el-popover\n                                    placement=\"right\"\n                                    title=\"角色列表\"\n                                    @show=\"showPop(hr)\"\n                                    @hide=\"hidePop(hr)\"\n                                    width=\"200\"\n                                    trigger=\"click\">\n                                <el-select v-model=\"selectedRoles\" multiple placeholder=\"请选择\">\n                                    <el-option\n                                            v-for=\"(r,indexk) in allroles\"\n                                            :key=\"indexk\"\n                                            :label=\"r.nameZh\"\n                                            :value=\"r.id\">\n                                    </el-option>\n                                </el-select>\n                                <el-button slot=\"reference\" icon=\"el-icon-more\" type=\"text\"></el-button>\n                            </el-popover>\n                        </div>\n                        <div>备注：{{hr.remark}}</div>\n                    </div>\n                </div>\n            </el-card>\n\n        </div>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"SysHr\",\n        data() {\n            return {\n                keywords: '',\n                hrs: [],\n                selectedRoles: [],\n                allroles: []\n            }\n        },\n        mounted() {\n            this.initHrs();\n        },\n        methods: {\n            deleteHr(hr) {\n                this.$confirm('此操作将永久删除【'+hr.name+'】, 是否继续?', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }).then(() => {\n                    this.deleteRequest(\"/system/hr/\"+hr.id).then(resp=>{\n                        if (resp) {\n                            this.initHrs();\n                        }\n                    })\n                }).catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: '已取消删除'\n                    });\n                });\n            },\n            doSearch() {\n                this.initHrs();\n            },\n            hidePop(hr) {\n                let roles = [];\n                Object.assign(roles, hr.roles);\n                let flag = false;\n                if (roles.length != this.selectedRoles.length) {\n                    flag = true;\n                } else {\n                    for (let i = 0; i < roles.length; i++) {\n                        let role = roles[i];\n                        for (let j = 0; j < this.selectedRoles.length; j++) {\n                            let sr = this.selectedRoles[j];\n                            if (role.id == sr) {\n                                roles.splice(i, 1);\n                                i--;\n                                break;\n                            }\n                        }\n                    }\n                    if (roles.length != 0) {\n                        flag = true;\n                    }\n                }\n                if (flag) {\n                    let url = '/system/hr/role?hrid=' + hr.id;\n                    this.selectedRoles.forEach(sr => {\n                        url += '&rids=' + sr;\n                    });\n                    this.putRequest(url).then(resp => {\n                        if (resp) {\n                            this.initHrs();\n                        }\n                    });\n                }\n            },\n            showPop(hr) {\n                this.initAllRoles();\n                let roles = hr.roles;\n                this.selectedRoles = [];\n                roles.forEach(r => {\n                    this.selectedRoles.push(r.id);\n                })\n            },\n            enabledChange(hr) {\n                delete hr.roles;\n                this.putRequest(\"/system/hr/\", hr).then(resp => {\n                    if (resp) {\n                        this.initHrs();\n                    }\n                })\n            },\n            initAllRoles() {\n                this.getRequest(\"/system/hr/roles\").then(resp => {\n                    if (resp) {\n                        this.allroles = resp;\n                    }\n                })\n            },\n            initHrs() {\n                this.getRequest(\"/system/hr/?keywords=\"+this.keywords).then(resp => {\n                    if (resp) {\n                        this.hrs = resp;\n                    }\n                })\n            }\n        }\n    }\n</script>\n\n<style>\n    .userinfo-container div {\n        font-size: 12px;\n        color: #409eff;\n    }\n\n    .userinfo-container {\n        margin-top: 20px;\n    }\n\n    .img-container {\n        width: 100%;\n        display: flex;\n        justify-content: center;\n    }\n\n    .userface-img {\n        width: 72px;\n        height: 72px;\n        border-radius: 72px;\n    }\n\n    .hr-container {\n        margin-top: 10px;\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: space-around;\n    }\n\n    .hr-card {\n        width: 350px;\n        margin-bottom: 20px;\n    }\n</style>"],"sourceRoot":"src/views/sys"}]}