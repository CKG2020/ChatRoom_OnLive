{"remainingRequest":"/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_admin/node_modules/babel-loader/lib/index.js!/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_admin/src/components/sys/basic/PermissMana.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_admin/src/components/sys/basic/PermissMana.vue","mtime":1609308664000},{"path":"/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ckg/git 总代码/ChatRoom_OnLive/personal/rj_vue/rj_admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"PermissMana\",\n  data: function data() {\n    return {\n      role: {\n        name: '',\n        nameZh: ''\n      },\n      allmenus: [],\n      activeName: -1,\n      selectedMenus: [],\n      roles: [],\n      loading: false,\n      globalLoading: false,\n      defaultProps: {\n        children: 'children',\n        label: 'name'\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.initRoles();\n  },\n  methods: {\n    deleteRole: function deleteRole(role) {\n      var _this = this;\n\n      this.$confirm('此操作将永久删除【' + role.nameZh + '】角色, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this.deleteRequest(\"/system/basic/permiss/role/\" + role.id).then(function (resp) {\n          if (resp) {\n            _this.initRoles();\n          }\n        });\n      }).catch(function () {\n        _this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    doAddRole: function doAddRole() {\n      var _this2 = this;\n\n      if (this.role.name && this.role.nameZh) {\n        this.globalLoading = true;\n        this.postRequest(\"/system/basic/permiss/role\", this.role).then(function (resp) {\n          _this2.globalLoading = false;\n\n          if (resp) {\n            _this2.role.name = '';\n            _this2.role.nameZh = '';\n\n            _this2.initRoles();\n          }\n        });\n      } else {\n        this.$message.error('数据不可以为空');\n      }\n    },\n    cancelUpdate: function cancelUpdate() {\n      this.activeName = -1;\n    },\n    doUpdate: function doUpdate(rid, index) {\n      var _this3 = this;\n\n      var tree = this.$refs.tree[index];\n      var selectedKeys = tree.getCheckedKeys(true);\n      var url = '/system/basic/permiss/?rid=' + rid;\n      selectedKeys.forEach(function (key) {\n        url += '&mids=' + key;\n      });\n      this.putRequest(url).then(function (resp) {\n        if (resp) {\n          _this3.activeName = -1;\n        }\n      });\n    },\n    change: function change(rid) {\n      if (rid) {\n        this.initAllMenus();\n        this.initSelectedMenus(rid);\n      }\n    },\n    initSelectedMenus: function initSelectedMenus(rid) {\n      var _this4 = this;\n\n      this.getRequest(\"/system/basic/permiss/mids/\" + rid).then(function (resp) {\n        if (resp) {\n          _this4.selectedMenus = resp;\n        }\n      });\n    },\n    initAllMenus: function initAllMenus() {\n      var _this5 = this;\n\n      this.getRequest(\"/system/basic/permiss/menus\").then(function (resp) {\n        if (resp) {\n          _this5.allmenus = resp;\n        }\n      });\n    },\n    initRoles: function initRoles() {\n      var _this6 = this;\n\n      this.loading = true;\n      this.getRequest(\"/system/basic/permiss/\").then(function (resp) {\n        _this6.loading = false;\n\n        if (resp) {\n          _this6.roles = resp;\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["PermissMana.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,IAAA,EAAA,EADA;AAEA,QAAA,MAAA,EAAA;AAFA,OADA;AAKA,MAAA,QAAA,EAAA,EALA;AAMA,MAAA,UAAA,EAAA,CAAA,CANA;AAOA,MAAA,aAAA,EAAA,EAPA;AAQA,MAAA,KAAA,EAAA,EARA;AASA,MAAA,OAAA,EAAA,KATA;AAUA,MAAA,aAAA,EAAA,KAVA;AAWA,MAAA,YAAA,EAAA;AACA,QAAA,QAAA,EAAA,UADA;AAEA,QAAA,KAAA,EAAA;AAFA;AAXA,KAAA;AAgBA,GAnBA;AAoBA,EAAA,OApBA,qBAoBA;AACA,SAAA,SAAA;AACA,GAtBA;AAuBA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,IADA,EACA;AAAA;;AACA,WAAA,QAAA,CAAA,cAAA,IAAA,CAAA,MAAA,GAAA,YAAA,EAAA,IAAA,EAAA;AACA,QAAA,iBAAA,EAAA,IADA;AAEA,QAAA,gBAAA,EAAA,IAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OAAA,EAIA,IAJA,CAIA,YAAA;AACA,QAAA,KAAA,CAAA,aAAA,CAAA,gCAAA,IAAA,CAAA,EAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,EAAA;AACA,YAAA,KAAA,CAAA,SAAA;AACA;AACA,SAJA;AAKA,OAVA,EAUA,KAVA,CAUA,YAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA;AACA,UAAA,IAAA,EAAA,MADA;AAEA,UAAA,OAAA,EAAA;AAFA,SAAA;AAIA,OAfA;AAgBA,KAlBA;AAmBA,IAAA,SAnBA,uBAmBA;AAAA;;AACA,UAAA,KAAA,IAAA,CAAA,IAAA,IAAA,KAAA,IAAA,CAAA,MAAA,EAAA;AACA,aAAA,aAAA,GAAA,IAAA;AACA,aAAA,WAAA,CAAA,4BAAA,EAAA,KAAA,IAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,aAAA,GAAA,KAAA;;AACA,cAAA,IAAA,EAAA;AACA,YAAA,MAAA,CAAA,IAAA,CAAA,IAAA,GAAA,EAAA;AACA,YAAA,MAAA,CAAA,IAAA,CAAA,MAAA,GAAA,EAAA;;AACA,YAAA,MAAA,CAAA,SAAA;AACA;AACA,SAPA;AAQA,OAVA,MAUA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,SAAA;AACA;AACA,KAjCA;AAkCA,IAAA,YAlCA,0BAkCA;AACA,WAAA,UAAA,GAAA,CAAA,CAAA;AACA,KApCA;AAqCA,IAAA,QArCA,oBAqCA,GArCA,EAqCA,KArCA,EAqCA;AAAA;;AACA,UAAA,IAAA,GAAA,KAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA;AACA,UAAA,YAAA,GAAA,IAAA,CAAA,cAAA,CAAA,IAAA,CAAA;AACA,UAAA,GAAA,GAAA,gCAAA,GAAA;AACA,MAAA,YAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,GAAA,IAAA,WAAA,GAAA;AACA,OAFA;AAGA,WAAA,UAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,UAAA,GAAA,CAAA,CAAA;AACA;AACA,OAJA;AAKA,KAjDA;AAkDA,IAAA,MAlDA,kBAkDA,GAlDA,EAkDA;AACA,UAAA,GAAA,EAAA;AACA,aAAA,YAAA;AACA,aAAA,iBAAA,CAAA,GAAA;AACA;AACA,KAvDA;AAwDA,IAAA,iBAxDA,6BAwDA,GAxDA,EAwDA;AAAA;;AACA,WAAA,UAAA,CAAA,gCAAA,GAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,aAAA,GAAA,IAAA;AACA;AACA,OAJA;AAKA,KA9DA;AA+DA,IAAA,YA/DA,0BA+DA;AAAA;;AACA,WAAA,UAAA,CAAA,6BAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,GAAA,IAAA;AACA;AACA,OAJA;AAKA,KArEA;AAsEA,IAAA,SAtEA,uBAsEA;AAAA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,WAAA,UAAA,CAAA,wBAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,KAAA;;AACA,YAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,KAAA,GAAA,IAAA;AACA;AACA,OALA;AAMA;AA9EA;AAvBA,CAAA","sourcesContent":["<template>\n    <div\n            v-loading=\"globalLoading\"\n            element-loading-text=\"正在添加...\"\n            element-loading-spinner=\"el-icon-loading\"\n            element-loading-background=\"rgba(0, 0, 0, 0.8)\"\n    >\n        <div class=\"permissManaTool\">\n            <el-input size=\"small\" placeholder=\"请输入角色英文名\" v-model=\"role.name\">\n                <template slot=\"prepend\">ROLE_</template>\n            </el-input>\n            <el-input size=\"small\" placeholder=\"请输入角色中文名\" v-model=\"role.nameZh\"\n                      @keydown.enter.native=\"doAddRole\"></el-input>\n            <el-button type=\"primary\" size=\"small\" icon=\"el-icon-plus\" @click=\"doAddRole\">添加角色</el-button>\n        </div>\n        <div class=\"permissManaMain\">\n            <el-collapse v-model=\"activeName\"\n                         v-loading=\"loading\"\n                         element-loading-text=\"正在加载...\"\n                         element-loading-spinner=\"el-icon-loading\"\n                         element-loading-background=\"rgba(0, 0, 0, 0.8)\"\n                         accordion\n                         @change=\"change\">\n                <el-collapse-item :title=\"r.nameZh\" :name=\"r.id\" v-for=\"(r,index) in roles\" :key=\"index\">\n                    <el-card class=\"box-card\">\n                        <div slot=\"header\" class=\"clearfix\">\n                            <span>可访问的资源</span>\n                            <el-button style=\"float: right; padding: 3px 0;color: #ff0000;\" icon=\"el-icon-delete\"\n                                       type=\"text\" @click=\"deleteRole(r)\"></el-button>\n                        </div>\n                        <div>\n                            <el-tree\n                                    show-checkbox\n                                    node-key=\"id\"\n                                    ref=\"tree\"\n                                    :key=\"index\"\n                                    :default-checked-keys=\"selectedMenus\"\n                                    :data=\"allmenus\" :props=\"defaultProps\"></el-tree>\n                            <div style=\"display: flex;justify-content: flex-end\">\n                                <el-button @click=\"cancelUpdate\">取消修改</el-button>\n                                <el-button type=\"primary\" @click=\"doUpdate(r.id,index)\">确认修改</el-button>\n                            </div>\n                        </div>\n                    </el-card>\n                </el-collapse-item>\n            </el-collapse>\n        </div>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"PermissMana\",\n        data() {\n            return {\n                role: {\n                    name: '',\n                    nameZh: ''\n                },\n                allmenus: [],\n                activeName: -1,\n                selectedMenus: [],\n                roles: [],\n                loading: false,\n                globalLoading: false,\n                defaultProps: {\n                    children: 'children',\n                    label: 'name'\n                }\n            }\n        },\n        mounted() {\n            this.initRoles();\n        },\n        methods: {\n            deleteRole(role) {\n                this.$confirm('此操作将永久删除【' + role.nameZh + '】角色, 是否继续?', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }).then(() => {\n                    this.deleteRequest(\"/system/basic/permiss/role/\" + role.id).then(resp => {\n                        if (resp) {\n                            this.initRoles();\n                        }\n                    })\n                }).catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: '已取消删除'\n                    });\n                });\n            },\n            doAddRole() {\n                if (this.role.name && this.role.nameZh) {\n                    this.globalLoading = true;\n                    this.postRequest(\"/system/basic/permiss/role\", this.role).then(resp => {\n                    this.globalLoading = false;\n                        if (resp) {\n                            this.role.name = '';\n                            this.role.nameZh = '';\n                            this.initRoles();\n                        }\n                    })\n                } else {\n                    this.$message.error('数据不可以为空');\n                }\n            },\n            cancelUpdate() {\n                this.activeName = -1;\n            },\n            doUpdate(rid, index) {\n                let tree = this.$refs.tree[index];\n                let selectedKeys = tree.getCheckedKeys(true);\n                let url = '/system/basic/permiss/?rid=' + rid;\n                selectedKeys.forEach(key => {\n                    url += '&mids=' + key;\n                })\n                this.putRequest(url).then(resp => {\n                    if (resp) {\n                        this.activeName = -1;\n                    }\n                })\n            },\n            change(rid) {\n                if (rid) {\n                    this.initAllMenus();\n                    this.initSelectedMenus(rid);\n                }\n            },\n            initSelectedMenus(rid) {\n                this.getRequest(\"/system/basic/permiss/mids/\" + rid).then(resp => {\n                    if (resp) {\n                        this.selectedMenus = resp;\n                    }\n                })\n            },\n            initAllMenus() {\n                this.getRequest(\"/system/basic/permiss/menus\").then(resp => {\n                    if (resp) {\n                        this.allmenus = resp;\n                    }\n                })\n            },\n            initRoles() {\n                this.loading = true;\n                this.getRequest(\"/system/basic/permiss/\").then(resp => {\n                    this.loading = false;\n                    if (resp) {\n                        this.roles = resp;\n                    }\n                })\n            }\n        }\n    }\n</script>\n\n<style>\n    .permissManaTool {\n        display: flex;\n        justify-content: flex-start;\n    }\n\n    .permissManaTool .el-input {\n        width: 300px;\n        margin-right: 6px;\n    }\n\n    .permissManaMain {\n        margin-top: 10px;\n        width: 700px;\n    }\n</style>"],"sourceRoot":"src/components/sys/basic"}]}